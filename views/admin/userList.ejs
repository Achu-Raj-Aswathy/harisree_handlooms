<%- include('./partials/header') %>


<!-- START Wrapper -->
<div class="wrapper">
<%- include('./partials/adminHeader') %>
<%- include('./partials/sidebar') %>
       

        <!-- ==================================================== -->
        <!-- Start right Content here -->
        <!-- ==================================================== -->

        <div class="page-content">

            <!-- Start Container Fluid -->
            <div class="container-xxl">

                
                <div class="row">
                    <div class="col-xl-12">
                         <div class="card">
                              <div class="d-flex card-header justify-content-between align-items-center">
                                   <div>
                                        <h4 class="card-title">All Customers List</h4>
                                   </div>
                                   <div class="dropdown">
                                        <a href="#" class="dropdown-toggle btn btn-sm btn-outline-light rounded" data-bs-toggle="dropdown" aria-expanded="false">
                                             This Month
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-end">
                                             <!-- item-->
                                             <a href="#!" class="dropdown-item">Download</a>
                                             <!-- item-->
                                             <a href="#!" class="dropdown-item">Export</a>
                                             <!-- item-->
                                             <a href="#!" class="dropdown-item">Import</a>
                                        </div>
                                   </div>
                              </div>
                              <div>
                                   <div class="table-responsive">
                                        <table class="table align-middle mb-0 table-hover table-centered">
                                             <thead class="bg-light-subtle">
                                                  <tr>
                                                       <th>ID</th>
                                                       <th>Name</th>
                                                       <th>Email</th>
                                                       <th>Mobile</th>
                                                       <th>Address</th>
                                                       <th>Number of Orders</th>
                                                       <th>Action</th>
                                                  </tr>
                                             </thead>
                                             <tbody>
                                                  <% if(users && users.length > 0) { %>
                                                       <% users.forEach((user, index) => { %>
                                                  <tr>
                                                       <td><%= user.userId %></td>
                                                       <td><%= user.name %></td>
                                                       <td><%= user.email %></td>
                                                       <td><%= user.mobile %></td>
                                                      <td><% if (user.address && user.address.length > 0 && user.address[0].billing) { %>
  <%= user.address[0].billing.addressLine %>,
  <%= user.address[0].billing.city %>,
  <%= user.address[0].billing.state %>
<% } else { %>
  N/A
<% } %>

</td>

                                                       <td><%= user.orders.length %></td>
                                                       <td>
                                                            <div class="d-flex gap-2">
                                                                 <a href="/admin/user-details?id=<%= user._id %>" class="btn btn-light btn-sm"><iconify-icon icon="solar:eye-broken" class="align-middle fs-18"></iconify-icon></a>
                                                                 <!-- <a href="#!" class="btn btn-soft-primary btn-sm" data-bs-toggle="modal" data-bs-target="#staticBackdrop"><iconify-icon icon="solar:pen-2-broken" class="align-middle fs-18"></iconify-icon></a>
                                                                 <a href="#!" class="btn btn-soft-danger btn-sm"><iconify-icon icon="solar:trash-bin-minimalistic-2-broken" class="align-middle fs-18"></iconify-icon></a> -->
                                                            </div>
                                                       </td>
                                                  </tr>
                                                  <% }) %>
                                                  <% } else { %>
                                                       <tr>
                                                            <td colspan="7">No users found</td>
                                                       </tr>
                                                  <% } %>
                                             </tbody>
                                        </table>
                                   </div>
                                   <!-- end table-responsive -->
                              </div>
                              <div class="card-footer border-top">
                                   <nav aria-label="Page navigation example">
                                        <ul class="pagination justify-content-end mb-0">
                                             <li class="page-item"><a class="page-link" href="javascript:void(0);">Previous</a></li>
                                             <li class="page-item active"><a class="page-link" href="javascript:void(0);">1</a></li>
                                             <li class="page-item"><a class="page-link" href="javascript:void(0);">2</a></li>
                                             <li class="page-item"><a class="page-link" href="javascript:void(0);">3</a></li>
                                             <li class="page-item"><a class="page-link" href="javascript:void(0);">Next</a></li>
                                        </ul>
                                   </nav>
                              </div>
                         </div>
                    </div>

               </div>
            </div>
            <!-- End Container Fluid -->

            <!-- ========== Footer Start ========== -->
          
            <!-- ========== Footer End ========== -->

        </div>
        <!-- ==================================================== -->
        <!-- End Page Content -->
        <!-- ==================================================== -->

  
    <!-- END Wrapper -->

    <!-- Vendor Javascript (Require in all Page) -->
   <%- include('./partials/footer') %>
  </div>
