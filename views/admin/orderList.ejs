<%- include ('./partials/header') %>
<div class="wrapper">
     <%- include('./partials/adminHeader') %>
     <%- include('./partials/sidebar')%>
          <!-- ==================================================== -->
          <!-- Start right Content here -->
          <!-- ==================================================== -->
          <div>

               <div class="page-content">

                    <!-- Start Container Fluid -->
                    <div class="container-xxl">

                         <div class="row">
                              <div class="col-xl-12">
                                   <div class="card">
                                        <div class="d-flex card-header justify-content-between align-items-center">
                                             <div>
                                                  <h4 class="card-title">All Order List</h4>
                                             </div>
                                             <a href="#" class="btn btn-sm btn-outline-light">
                                                  Export
                                             </a>
                                        </div>
                                        <div class="card-body p-0">
                                             <div class="table-responsive">
                                                  <table class="table align-middle mb-0 table-hover table-centered">
                                                       <thead class="bg-light-subtle">
                                                            <tr>
                                                                 <th>Order ID</th>
                                                                 <th>Created at</th>
                                                                 <th>Customer ID</th>
                                                                 <th>Items</th>
                                                                 <th>Total</th>
                                                                 <th>Payment Status</th>
                                                                 <th>Order Status</th>
                                                            </tr>
                                                       </thead>
                                                       <tbody>
                                                            <% if(orders.length > 0) { %>
                                                            <% orders.forEach(order => { %>
                                                            <tr>
                                                                 <td><%= order.orderId %></td>
                                                                 <td><%= order.createdAt.toLocaleDateString('en-IN') %></td>
                                                                 <td>
                                                                      <a href="/admin/user-details?id=<%= order.userId._id %>"><%= order.userId.userId %></a>
                                                                      
                                                                 </td>
                                                                  <td>
          <ul class="list-unstyled mb-0">
            <% order.items.forEach(item => { %>
              <li>
                <%= item.productId.name || 'Product' %> x <%= item.quantity %> - ₹<%= item.subtotal.toFixed(2) %>
              </li>
            <% }) %>
          </ul>
        </td>
        <td>₹<%= order.total.toFixed(2) %></td>
                                                                 <td><%= order.paymentStatus %></td>
                                                                 <td><%= order.status %></td>
                                                            </tr>
                                                            <% }) %>
                                                            <% } else { %>
                                                            <tr>
                                                                 <td colspan="9" class="text-center">No orders found</td>
                                                            </tr>
                                                            <% } %>
                                                       </tbody>
                                                  </table>
                                             </div>
                                             <!-- end table-responsive -->
                                        </div>
                                        <div class="card-footer border-top">
                                              <nav aria-label="Page navigation example">
    <ul class="pagination justify-content-end mb-0">
      <% if (currentPage > 1) { %>
        <li class="page-item">
          <a class="page-link" href="?page=<%= currentPage - 1 %>">Previous</a>
        </li>
      <% } else { %>
        <li class="page-item disabled">
          <span class="page-link">Previous</span>
        </li>
      <% } %>

      <% for (let i = 1; i <= totalPages; i++) { %>
        <li class="page-item <%= currentPage === i ? 'active' : '' %>">
          <a class="page-link" href="?page=<%= i %>"><%= i %></a>
        </li>
      <% } %>

      <% if (currentPage < totalPages) { %>
        <li class="page-item">
          <a class="page-link" href="?page=<%= currentPage + 1 %>">Next</a>
        </li>
      <% } else { %>
        <li class="page-item disabled">
          <span class="page-link">Next</span>
        </li>
      <% } %>
    </ul>
  </nav>
                                        </div>
                                   </div>
                              </div>

                         </div>

                    </div>
                    <!-- End Container Fluid -->

                <%- include('./partials/footer') %>
                    <!-- ========== Footer End ========== -->

               </div>
               <!-- ==================================================== -->
               <!-- End Page Content -->
               <!-- ==================================================== -->

          </div>
